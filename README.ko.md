# GitPulse

**[English](README.md) | [简体中文](README.zh-CN.md) | [日本語](README.ja.md) | [한국어](README.ko.md)**

AI 기반 Git 기여도 분석기. 커밋을 분석하고, 개발자 기여를 여러 차원에서 점수화하며, 성과 보고서를 생성합니다.

## 기능

- 다차원 점수화: 코드 품질, 복잡도 및 영향력, 커밋 규율, 협업
- Markdown 파일을 통한 맞춤형 평가 기준(Rubric)
- 다양한 LLM 제공자 지원 (OpenAI, Anthropic, Google, 커스텀 엔드포인트)
- 비용 효율적인 스마트 배치 처리
- 증분 캐싱 — 새로운 커밋만 분석
- 다양한 출력 형식: 터미널, JSON, Markdown, HTML
- 프라이버시 제어: 익명화, 콘텐츠 제외

## 빠른 시작

```bash
# 전역 설치
npm install -g gitpulse-cli

# 설정 (대화형 마법사)
gitpulse config --init

# 저장소 분석
gitpulse analyze . --max-commits 10

# 다양한 형식으로 보고서 생성
gitpulse analyze . --format json -o report.json
gitpulse analyze . --format html -o report.html

# 두 개발자 비교
gitpulse compare "Alice" "Bob"
```

## 홈 디렉토리 (`~/.gitpulse/`)

첫 실행 시 (`gitpulse config --init` 또는 임의의 `gitpulse analyze`) 글로벌 홈 디렉토리가 자동으로 생성됩니다:

```
~/.gitpulse/
├── rubrics/                       # 기본 평가 기준 파일 (편집 가능)
│   ├── code-quality.md
│   ├── complexity-impact.md
│   ├── commit-discipline.md
│   └── collaboration.md
├── history/                       # 분석 기록 (실행당 하나의 JSON)
│   └── {repoName}_{YYYYMMDD-HHmmss}_{id}.json
├── memory/                        # 에이전트 메모리
│   └── agent-memory.json
└── config.yml                     # 글로벌 설정
```

- **rubrics/** — 첫 초기화 시 내장 기본값에서 복사됩니다. 이 파일을 편집하여 글로벌 점수화를 맞춤 설정할 수 있습니다. 이후 실행 시 덮어쓰지 않습니다.
- **history/** — 각 분석 실행 후 점수, 비용, 소요 시간을 포함한 요약 JSON을 작성합니다.
- **memory/** — 저장소별 분석 횟수, 이동 평균 점수, 추론된 사용자 선호도(제공자, 모델, 출력 형식)를 누적합니다.
- **config.yml** — 글로벌 폴백 설정 (아래 "설정" 섹션 참조).

## 설정

GitPulse는 [cosmiconfig](https://github.com/cosmiconfig/cosmiconfig)을 사용하여 설정을 관리합니다. 설정은 다음 우선순위로 해석됩니다:

1. **프로젝트 수준** — 프로젝트 루트의 `.gitpulse.yml` (또는 기타 cosmiconfig 지원 형식)
2. **글로벌 수준** — `~/.gitpulse/config.yml`
3. **내장 기본값** — Zod 스키마 기본값

프로젝트 루트에 `.gitpulse.yml`을 생성하거나 `~/.gitpulse/config.yml`을 편집하세요:

```yaml
provider: openai
model: gpt-4o

scoring:
  weights:
    codeQuality: 0.30
    complexityImpact: 0.25
    commitDiscipline: 0.25
    collaboration: 0.20
  timeDecay: false
  maxTokensPerDiff: 8000

analysis:
  maxConcurrency: 3
  skipMergeCommits: true
  skipLockFiles: true
  skipAutoGenerated: true

output:
  format: terminal
  anonymize: false

privacy:
  excludeFileContents: false
  anonymize: false
```

환경 변수로 API 키 설정:

```bash
export OPENAI_API_KEY=sk-...
# 또는
export ANTHROPIC_API_KEY=sk-ant-...
```

## 맞춤 평가 기준

평가 기준 파일은 다음 순서로 검색됩니다:

1. 프로젝트 수준: `<repo>/.gitpulse/rubrics/`
2. 글로벌: `~/.gitpulse/rubrics/`
3. 패키지에 포함된 내장 기본값

다음 위치 중 하나에 Markdown 파일을 배치하여 기본 평가 기준을 재정의할 수 있습니다:

```
.gitpulse/
  rubrics/
    code-quality.md
    complexity-impact.md
    commit-discipline.md
    collaboration.md
```

`gitpulse config --init`을 실행하면 `~/.gitpulse/rubrics/`에 내장 기본값이 채워집니다. 필요에 따라 편집하세요. 기본 평가 기준 형식은 이 저장소의 `rubrics/` 디렉토리를 참조하세요.

## CLI 명령어

```
gitpulse analyze [path]        저장소 기여도 분석
  -b, --branch <branch>        분석할 브랜치 지정
  --since / --until <date>     날짜 범위
  --author <names...>          저자별 필터
  --max-commits <n>            커밋 수 제한
  --format <type>              terminal | json | markdown | html
  -o, --output <path>          출력 파일
  --no-cache                   강제 재점수화
  -y, --yes                    확인 건너뛰기
  --provider <type>            LLM 제공자 재정의
  --model <name>               모델 재정의

gitpulse report [path]         캐시에서 보고서 생성
gitpulse config --init         ~/.gitpulse/ 초기화 + 대화형 설정
gitpulse config --show         현재 설정 표시
gitpulse compare <a1> <a2>     두 개발자 비교
```

`gitpulse analyze` 실행 시 자동으로:

- `~/.gitpulse/`가 존재하지 않으면 생성
- 분석 결과를 `~/.gitpulse/history/`에 기록
- `~/.gitpulse/memory/agent-memory.json`의 에이전트 메모리 업데이트

## 패키지

| 패키지 | 설명 |
|--------|------|
| `@gitpulse/core` | 핵심 분석 엔진, 점수화, 보고서 생성 |
| `gitpulse-cli` | CLI 도구 |

## 개발

```bash
# 의존성 설치
pnpm install

# 전체 패키지 빌드
pnpm build

# 테스트 실행
pnpm test

# 린트
pnpm lint
```

## 프라이버시 및 윤리

- diff 콘텐츠만 LLM API로 전송되며, 전체 파일은 전송되지 않습니다
- `excludeFileContents: true`를 설정하면 통계 데이터만 전송
- 익명화 모드는 이름을 결정론적 가명으로 대체
- 점수는 기여의 특성을 측정하는 것이며, 개발자의 가치를 측정하는 것이 아닙니다

## 라이선스

[Apache-2.0](LICENSE)
